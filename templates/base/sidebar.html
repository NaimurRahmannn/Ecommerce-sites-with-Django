<aside class="col-md-3">
  <style>
    .sidebar-nav {
      position: sticky;
      top: 24px;
    }
    .sidebar-nav .sidebar-section {
      margin-bottom: 28px;
    }
    .sidebar-nav .sidebar-heading {
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 2.5px;
      text-transform: uppercase;
      color: #111;
      padding-bottom: 10px;
      margin-bottom: 6px;
      border-bottom: 2px solid #111;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      user-select: none;
    }
    .sidebar-nav .sidebar-heading .heading-icon {
      font-size: 14px;
      transition: transform 0.25s ease;
    }
    .sidebar-nav .sidebar-heading.collapsed .heading-icon {
      transform: rotate(-90deg);
    }
    .sidebar-nav .sidebar-links {
      list-style: none;
      padding: 0;
      margin: 0;
      overflow: hidden;
      transition: max-height 0.35s ease;
    }
    .sidebar-nav .sidebar-links li {
      padding: 0;
    }
    .sidebar-nav .sidebar-links li a {
      display: block;
      padding: 7px 0 7px 0;
      font-size: 13.5px;
      font-weight: 400;
      color: #555;
      text-decoration: none;
      letter-spacing: 0.3px;
      position: relative;
      transition: color 0.2s ease, padding-left 0.2s ease;
    }
    .sidebar-nav .sidebar-links li a::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%) scaleX(0);
      width: 3px;
      height: 60%;
      background: #111;
      border-radius: 2px;
      transition: transform 0.2s ease;
    }
    .sidebar-nav .sidebar-links li a:hover {
      color: #111;
      padding-left: 12px;
    }
    .sidebar-nav .sidebar-links li a:hover::before {
      transform: translateY(-50%) scaleX(1);
    }
    .sidebar-nav .sidebar-links li a.active-cat {
      color: #111;
      font-weight: 600;
      padding-left: 12px;
    }
    .sidebar-nav .sidebar-links li a.active-cat::before {
      transform: translateY(-50%) scaleX(1);
    }
    .sidebar-divider {
      border: none;
      border-top: 1px solid #e8e8e8;
      margin: 0 0 28px 0;
    }
  </style>

  <nav class="sidebar-nav">
    <!-- Men -->
    <div class="sidebar-section">
      <div class="sidebar-heading" data-toggle="collapse" data-target="#sidebar-men" aria-expanded="true">
        <span class="heading-icon fa fa-chevron-down"></span>
        Men
      </div>
      <div class="collapse show" id="sidebar-men">
        <ul class="sidebar-links">
          {% for cat in men_categories %}
          <li>
            <a href="{% url 'category_products' cat.slug %}"
              {% if current_category and current_category.uid == cat.uid %}class="active-cat"{% endif %}
            >{{ cat.categroy_name }}</a>
          </li>
          {% empty %}
          <li><span style="font-size:12px;color:#aaa;">No categories yet</span></li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <hr class="sidebar-divider">

    <!-- Women -->
    <div class="sidebar-section">
      <div class="sidebar-heading" data-toggle="collapse" data-target="#sidebar-women" aria-expanded="true">
        <span class="heading-icon fa fa-chevron-down"></span>
        Women
      </div>
      <div class="collapse show" id="sidebar-women">
        <ul class="sidebar-links">
          {% for cat in women_categories %}
          <li>
            <a href="{% url 'category_products' cat.slug %}"
              {% if current_category and current_category.uid == cat.uid %}class="active-cat"{% endif %}
            >{{ cat.categroy_name }}</a>
          </li>
          {% empty %}
          <li><span style="font-size:12px;color:#aaa;">No categories yet</span></li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </nav>

  <script>
    (function(){
      document.querySelectorAll('.sidebar-heading[data-toggle="collapse"]').forEach(function(heading){
        var targetId = heading.getAttribute('data-target');
        var target = document.querySelector(targetId);
        if(!target) return;
        $(target).on('hide.bs.collapse', function(){ heading.classList.add('collapsed'); });
        $(target).on('show.bs.collapse', function(){ heading.classList.remove('collapsed'); });
      });
    })();
  </script>
</aside>

